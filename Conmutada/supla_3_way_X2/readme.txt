Supla 3 Way Switch works as a direct replacement for the last switch in a 3-way circuit.
Allows control from the App, existing switches and the button connected to the device (toggle).
status memory in case of power failure.

AC line detector
https://learn.edwinrobotics.com/230v110v-ac-mains-detection-using-arduino-raspberry-pi-and-esp8266-thing/

Sensor1 Gpio 5 -- D1
Relay1  Gpio 4 -- D2
Button1 Gpio 0 -- D3
Sensor2 Gpio 14 -- D5
Relay2  Gpio 12 -- D6
Button2 Gpio 13 -- D7
stsLed Gpio 2 -- D4
